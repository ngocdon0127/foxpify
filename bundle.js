function initFoxpify(){function d(){var b=document.createElement("img");b.id="foxpifyButton";b.src="https://lucky-wheel.foxpify.com/ui/gambler.png";b.addEventListener("click",function(b){e(b.target)});document.body.append(b)}function e(b){console.log("invoked");console.log("clicked");document.body.append(f);window.open("https://lucky-wheel.foxpify.com/ui/iframe.html","foxpifyIframe");document.getElementById("foxpifyButton").style.display="none"}console.log("invoked with url:");var a=document.getElementsByTagName("script");
console.log("total "+a.length+" scripts imported");for(var c=-1,k=0;k<a.length;k++){var l=a[k];l.src&&/\/foxpify\.js/.test(l.src)&&(c=k)}if(-1==c)console.log("foxpify script not found");else{c=a[c];console.log("src:",c.src);a=c.src.replace(/^[^\?]+\??/,"");console.log("query:",a);var g=a.match(/shop=([^&]+)/);if(!g||2>g.length)console.log("missing shop domain");else{console.log("shop:",g[1]);var f=document.createElement("iframe");f.id="foxpifyIframe";f.name="foxpifyIframe";f.setAttribute("style",
"position:fixed; top:0px; left:0%; bottom:0px; width:100%; height:100%; border:none; padding:0; margin-top: 0; overflow:hidden; z-index:99999;");a=new XMLHttpRequest;a.onreadystatechange=function(b){console.log(this.readyState);console.log(this.status);if(4==this.readyState&&200==this.status){b={};try{b=JSON.parse(this.responseText)}catch(h){console.log(h)}console.log(b);if(b.hasOwnProperty("id")){var a={};try{a=JSON.parse(foxpifyGetCookie("foxpify"))}catch(h){}a.hasOwnProperty(b.id)||d();a.hasOwnProperty("auto-open-popup-"+
b.id)||e(document.getElementById("foxpifyButton"))}}};a.open("GET","https://lucky-wheel.foxpify.com/api/campaigns/"+g[1]);a.send();a=document.createElement("div");a.innerHTML="<style>\n\t\t#foxpifyButton {\n\t\t\tbackground-color: #5cb85c;\n\t\t\tborder: none;\n\t\t\tborder-radius: 50%;\n\t\t\tcolor: #fff;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: fixed;\n\t\t\tbottom: 25px;\n\t\t\tright: 25px;\n\t\t\tz-index: 999999;\n\t\t\tcursor: pointer;\n\t\t\topacity: 0.8;\n\t\t\ttransition: ease 0.2s;\n\t\t}\n\n\t\t#foxpifyButton:hover {\n\t\t\tbackground-color: #5fc15f;\n\t\t\twidth: 60px;\n\t\t\theight: 60px;\n\t\t\tbottom: 20px;\n\t\t\tright: 20px;\n\t\t\topacity: 1;\n\t\t\ttransform: rotateZ(360deg);\n\t\t}\n\t</style>";
document.body.append(a);console.log("here");window.addEventListener("message",function(b){var a={};try{a=JSON.parse(b.data)}catch(h){}if("closeFoxpifyIFrame"==a.msg){console.log(b);document.getElementById("foxpifyButton").style.display="block";document.getElementById("foxpifyIframe").remove();b={};try{b=JSON.parse(foxpifyGetCookie("foxpify"))}catch(h){}b["auto-open-popup-"+a.campaignId]=!1;foxpifySetCookie("foxpify",JSON.stringify(b))}else if("iframeInitialized"==a.msg)f.contentWindow.postMessage(JSON.stringify({msg:"initialize",
shop:g[1]}),"*"),console.log("message initialize sent to iframe");else if("markUser"==a.msg){b={};try{b=JSON.parse(foxpifyGetCookie("foxpify"))}catch(h){}b.hasOwnProperty(a.campaignId)&&b[a.campaignId]instanceof Array?b[a.campaignId].push(a.email):b[a.campaignId]=[a.email];foxpifySetCookie("foxpify",JSON.stringify(b))}})}}}function foxpifySetCookie(d,e,a){var c=new Date;c.setTime(c.getTime()+864E5*a);a="expires="+c.toUTCString();document.cookie=d+"="+e+";"+a+";path=/"}
function foxpifyGetCookie(d){d+="=";for(var e=decodeURIComponent(document.cookie).split(";"),a=0;a<e.length;a++){for(var c=e[a];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(d))return c.substring(d.length,c.length)}return""}initFoxpify();