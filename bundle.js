function initFoxpify(){function d(){var a=document.createElement("img");a.id="foxpifyButton";a.src="https://lucky-wheel.foxpify.com/ui/gambler.png";a.addEventListener("click",function(a){e(a.target)});document.body.append(a);setTimeout(function(){a.style.transform="rotateZ(2160deg)";a.style.transition="linear 1s";a.style.width="100px";a.style.height="100px";a.style.right="0px";a.style.bottom="0px";a.style.opacity="0.9";setTimeout(function(){a.style.transform="rotateZ(0deg)";a.style.width="50px";a.style.height=
"50px";a.style.right="25px";a.style.bottom="25px";setTimeout(function(){a.style.transition="linear 0.2s"},1E3)},1E3)},1E3)}function e(a){console.log("invoked");console.log("clicked");document.body.append(f);window.open("https://lucky-wheel.foxpify.com/ui/iframe.html","foxpifyIframe");document.getElementById("foxpifyButton").style.display="none"}console.log("invoked with url:");var b=document.getElementsByTagName("script");console.log("total "+b.length+" scripts imported");for(var c=-1,k=0;k<b.length;k++){var l=
b[k];l.src&&/\/foxpify\.js/.test(l.src)&&(c=k)}if(-1==c)console.log("foxpify script not found");else{c=b[c];console.log("src:",c.src);b=c.src.replace(/^[^\?]+\??/,"");console.log("query:",b);var g=b.match(/shop=([^&]+)/);if(!g||2>g.length)console.log("missing shop domain");else{console.log("shop:",g[1]);var f=document.createElement("iframe");f.id="foxpifyIframe";f.name="foxpifyIframe";f.setAttribute("style","position:fixed; top:0px; left:0%; bottom:0px; width:100%; height:100%; border:none; padding:0; margin-top: 0; overflow:hidden; z-index:99999;");
b=new XMLHttpRequest;b.onreadystatechange=function(a){console.log(this.readyState);console.log(this.status);if(4==this.readyState&&200==this.status){a={};try{a=JSON.parse(this.responseText)}catch(h){console.log(h)}console.log(a);if(a.hasOwnProperty("id")){var b={};try{b=JSON.parse(foxpifyGetCookie("foxpify"))}catch(h){}b.hasOwnProperty(a.id)||d();b.hasOwnProperty("auto-open-popup-"+a.id)||e(document.getElementById("foxpifyButton"))}}};b.open("GET","https://lucky-wheel.foxpify.com/api/campaigns/"+
g[1]);b.send();b=document.createElement("div");b.innerHTML="<style>\n\t\t#foxpifyButton {\n\t\t\tbackground-color: #5cb85c;\n\t\t\tborder: none;\n\t\t\tborder-radius: 50%;\n\t\t\tcolor: #fff;\n\t\t\twidth: 20px;\n\t\t\theight: 20px;\n\t\t\tposition: fixed;\n\t\t\tbottom: 40px;\n\t\t\tright: 40px;\n\t\t\tz-index: 999999;\n\t\t\tcursor: pointer;\n\t\t\topacity: 0.0;\n\t\t\ttransition: linear 0.2s;\n\t\t}\n\n\t\t#foxpifyButton:hover {\n\t\t\tbackground-color: #5fc15f;\n\t\t\twidth: 60px !important;\n\t\t\theight: 60px !important;\n\t\t\tbottom: 20px !important;\n\t\t\tright: 20px !important;\n\t\t\topacity: 1;\n\t\t\ttransform: rotateZ(360deg) !important;\n\t\t}\n\t</style>";
document.body.append(b);console.log("here");window.addEventListener("message",function(a){var b={};try{b=JSON.parse(a.data)}catch(h){}if("closeFoxpifyIFrame"==b.msg){console.log(a);document.getElementById("foxpifyButton").style.display="block";document.getElementById("foxpifyIframe").remove();a={};try{a=JSON.parse(foxpifyGetCookie("foxpify"))}catch(h){}a["auto-open-popup-"+b.campaignId]=!1;foxpifySetCookie("foxpify",JSON.stringify(a))}else if("iframeInitialized"==b.msg)f.contentWindow.postMessage(JSON.stringify({msg:"initialize",
shop:g[1]}),"*"),console.log("message initialize sent to iframe");else if("markUser"==b.msg){a={};try{a=JSON.parse(foxpifyGetCookie("foxpify"))}catch(h){}a.hasOwnProperty(b.campaignId)&&a[b.campaignId]instanceof Array?a[b.campaignId].push(b.email):a[b.campaignId]=[b.email];foxpifySetCookie("foxpify",JSON.stringify(a))}})}}}function foxpifySetCookie(d,e,b){var c=new Date;c.setTime(c.getTime()+864E5*b);b="expires="+c.toUTCString();document.cookie=d+"="+e+";"+b+";path=/"}
function foxpifyGetCookie(d){d+="=";for(var e=decodeURIComponent(document.cookie).split(";"),b=0;b<e.length;b++){for(var c=e[b];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(d))return c.substring(d.length,c.length)}return""}initFoxpify();